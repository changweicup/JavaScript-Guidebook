(window.webpackJsonp=window.webpackJsonp||[]).push([[128],{506:function(v,_,t){"use strict";t.r(_);var e=t(2),a=Object(e.a)({},function(){var v=this,_=v.$createElement,t=v._self._c||_;return t("ContentSlotsDistributor",{attrs:{"slot-key":v.$parent.slotKey}},[t("h1",{attrs:{id:"dns-域名解析协议"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#dns-域名解析协议","aria-hidden":"true"}},[v._v("#")]),v._v(" DNS 域名解析协议")]),v._v(" "),t("p",[v._v("DNS（DomainNameSystem）系统用于命名阻止到域层次结构中的计算机和网络服务。")]),v._v(" "),t("p",[v._v("使用 IP 地址而非使用域名进行通信的原因：")]),v._v(" "),t("ul",[t("li",[v._v("IP 地址是固定长度，IPv4 是 32 位，IPv6 是 128 位，而域名是变长的，不便于计算机处理")]),v._v(" "),t("li",[v._v("IP 地址对于用户来说不方便记忆，但域名便于用户使用")])]),v._v(" "),t("p",[v._v("总结来说就是 IP 面向主机，域名面向用户。")]),v._v(" "),t("p",[v._v("⛳️ "),t("em",[t("strong",[v._v("hosts")])])]),v._v(" "),t("p",[v._v("域名和 IP 的对应关系保存在一个叫 hosts 文件中。")]),v._v(" "),t("h2",{attrs:{id:"dns-系统"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#dns-系统","aria-hidden":"true"}},[v._v("#")]),v._v(" DNS 系统")]),v._v(" "),t("ol",[t("li",[v._v("一个组织的系统管理机构，维护系统内的每个主机的 IP 和主机名的对应关系")]),v._v(" "),t("li",[v._v("如果新计算机接入网络，将这个信息注册到数据库中")]),v._v(" "),t("li",[v._v("用户输入域名的时候，会自动查询 DNS 服务器，由 DNS 服务器检索数据库，得到对应的 IP 地址\n我们可以通过命令查看自己的 "),t("code",[v._v("hosts")]),v._v(" 文件")])]),v._v(" "),t("p",[v._v("在域名解析的过程中仍然会优先查找 hosts 文件的内容。")]),v._v(" "),t("h2",{attrs:{id:"dns-域名结构"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#dns-域名结构","aria-hidden":"true"}},[v._v("#")]),v._v(" DNS 域名结构")]),v._v(" "),t("h3",{attrs:{id:"域名的层次结构"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#域名的层次结构","aria-hidden":"true"}},[v._v("#")]),v._v(" 域名的层次结构")]),v._v(" "),t("p",[t("strong",[v._v("域名系统必须要保持唯一性。")])]),v._v(" "),t("ol",[t("li",[v._v("每个域名都是一个标号序列，用字母（大小写等价）、数字（0-9）和连接符（-）组成")]),v._v(" "),t("li",[v._v("标号序列总长度不能超过 255 个字符，它由点号分割成一个个的标号")]),v._v(" "),t("li",[v._v("每个标号应该在 63 个字符之内，每个标号都可以堪称一个层次的域名")]),v._v(" "),t("li",[v._v("级别最低的域名写在左边，级别最高的域名写在右边")])]),v._v(" "),t("p",[v._v("域名服务是基于 UDP 实现的，服务器的端口号为 53。")]),v._v(" "),t("p",[v._v("🌰 例如：")]),v._v(" "),t("p",[t("code",[v._v("www.google.com")])]),v._v(" "),t("ul",[t("li",[t("code",[v._v("com")]),v._v(" 一级域名，表示这是个企业域名")]),v._v(" "),t("li",[t("code",[v._v("google")]),v._v(" 二级域名，表示公司名")]),v._v(" "),t("li",[t("code",[v._v("www")]),v._v(" 万维网")])]),v._v(" "),t("h3",{attrs:{id:"域名的分级"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#域名的分级","aria-hidden":"true"}},[v._v("#")]),v._v(" 域名的分级")]),v._v(" "),t("p",[v._v("域名可以划分为各个子域，子域还可以继续划分为子域的子域，这样就形成了顶级域、二级域、三级域等。")]),v._v(" "),t("table",[t("thead",[t("tr",[t("th",[v._v("顶级域名")]),v._v(" "),t("th",[v._v("标识")])])]),v._v(" "),t("tbody",[t("tr",[t("td",[v._v("国家顶级域名")]),v._v(" "),t("td",[v._v("中国 "),t("code",[v._v("cn")]),v._v("；美国 "),t("code",[v._v("us")]),v._v("；英国 "),t("code",[v._v("uk")])])]),v._v(" "),t("tr",[t("td",[v._v("通用顶级域名")]),v._v(" "),t("td",[v._v("公司企业 "),t("code",[v._v("com")]),v._v("；教育机构 "),t("code",[v._v("edu")]),v._v("；政府部门 "),t("code",[v._v("gov")]),v._v("；国际组织 "),t("code",[v._v("int")]),v._v("；军事部门 "),t("code",[v._v("mil")]),v._v("；网络 "),t("code",[v._v("net")]),v._v("；非盈利组织 "),t("code",[v._v("org")])])]),v._v(" "),t("tr",[t("td",[v._v("反向域名")]),v._v(" "),t("td",[v._v("arpa 用于 PTR 查询（IP 地址转换为域名）")])])])]),v._v(" "),t("h2",{attrs:{id:"域名服务器"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#域名服务器","aria-hidden":"true"}},[v._v("#")]),v._v(" 域名服务器")]),v._v(" "),t("p",[v._v("域名是分层结构，域名服务器也是对应的层级结构。")]),v._v(" "),t("p",[v._v("域名服务器 => 装有域名系统的主机")]),v._v(" "),t("p",[v._v("由高到低进行层次划分。")]),v._v(" "),t("table",[t("thead",[t("tr",[t("th",[v._v("分类")]),v._v(" "),t("th",[v._v("作用")])])]),v._v(" "),t("tbody",[t("tr",[t("td",[v._v("根域名服务器")]),v._v(" "),t("td",[v._v("最高层次的域名服务器，本地域名服务器解析不了的域名就会向其求助")])]),v._v(" "),t("tr",[t("td",[v._v("顶级域名服务器")]),v._v(" "),t("td",[v._v("负责管理在该顶级域名服务器下注册的耳机线域名")])]),v._v(" "),t("tr",[t("td",[v._v("权限域名服务器")]),v._v(" "),t("td",[v._v("负责一个区的域名解析工作")])]),v._v(" "),t("tr",[t("td",[v._v("本地域名服务器")]),v._v(" "),t("td",[v._v("当一个主机发出 DNS 查询请求时，这个查询请求首先发给本地域名服务器")])])])]),v._v(" "),t("p",[v._v("⚠️ 一个域名服务器所负责的范围，或者说有管理权限的范围，就称为区。")]),v._v(" "),t("blockquote",[t("ol",[t("li",[v._v("每个层的域名上都有自己的域名服务器，最顶层的是根域名服务器")]),v._v(" "),t("li",[v._v("每一级域名服务器都知道下级域名服务器的 IP 地址")]),v._v(" "),t("li",[v._v("为了容灾, 每一级至少设置两个或以上的域名服务器")])])]),v._v(" "),t("h2",{attrs:{id:"域名解析过程"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#域名解析过程","aria-hidden":"true"}},[v._v("#")]),v._v(" 域名解析过程")]),v._v(" "),t("p",[v._v("DNS 是一种实用 UDP 协议进行域名查询的协议，其最主要的目标就是将域名转换为 IP 地址。")]),v._v(" "),t("p",[v._v("以查询 "),t("code",[v._v("www.meituan.com")]),v._v(" 对应的 IP 地址为例，操作系统首先会在本地尝试解析，比如使用众所周知的 "),t("code",[v._v("hosts")]),v._v(" 文件，同时如果有解析缓存的话，操作系统也会去查询。如果是在浏览器中进行查询，浏览器自己有时也会有解析缓存。")]),v._v(" "),t("ul",[t("li",[v._v("用户设备\n"),t("ul",[t("li",[v._v("浏览器可能会缓存域名解析")]),v._v(" "),t("li",[v._v("用户系统中可以有自己的域名映射表")])])]),v._v(" "),t("li",[v._v("公共域名服务器\n"),t("ul",[t("li",[v._v("通常由 ISP 提供")]),v._v(" "),t("li",[v._v("缓存上一级域名服务器的结果")])])])]),v._v(" "),t("p",[v._v("在查询没有结果时，设备最终会开始向域名服务器发起查询请求。公共域名服务器一般就是用户的 ISP 提供的。这种公共域名服务器通常会缓存查询结果，因此如果缓存命中，查询就可以到此结束。当然缓存本身是有时效的，这个时效就被称为 TTL。对于超过时效的查询结果，域名服务器有义务重新发起查询请求。但查询本身是非常消耗流量的事情，因此也有一些公共服务器不严格遵守 TTL，超时缓存。")]),v._v(" "),t("p",[v._v("未命名缓存的查询，公共服务器会向顶级域名服务器进行查询。以上述例子来说，因为公共域名服务器不知道 "),t("code",[v._v("meituan.com")]),v._v(" 的解析权归谁，因此它会向顶级域名服务器——"),t("code",[v._v("com")]),v._v(" 域名服务器发起请求，寻找 "),t("code",[v._v("meituan.com")]),v._v(" 对应的域名服务器。顶级域名服务器一般是由域名经营机构来维护的，有些甚至归属国家机关管理，例如国别域名。理论上来说，在顶级域名服务器之上还有一个根域名服务器，不过在平时很难意识到它的存在。")]),v._v(" "),t("ul",[t("li",[v._v("公共域名服务器\n"),t("ul",[t("li",[v._v("DNS 级联的特性决定了中途可以有更多域名服务器")])])]),v._v(" "),t("li",[v._v("顶级域名服务器\n"),t("ul",[t("li",[v._v("由顶级域名经营机构维护")]),v._v(" "),t("li",[v._v("可细分为与国家、通用")])])])]),v._v(" "),t("p",[v._v("在查找到 "),t("code",[v._v("meituan.com")]),v._v(" 的域名服务器之后，就可以向域名服务器查询 "),t("code",[v._v("www.meituan.com")]),v._v(" 的 IP 了。这个过程是由上到下指定下来的，所以这种域名服务器可以被称为权威域名服务器。对于开发者来说，我们自己平时在域名服务器那里购买到域名之后，录入自己域名对应的 IP，其实就是在向权威域名服务器录入信息。一些大型企业会自己维护权威域名服务器，这样既可以抵御一些针对性的攻击，同时也可以更好地优化解析的速度。")]),v._v(" "),t("ul",[t("li",[v._v("公共域名服务器")]),v._v(" "),t("li",[v._v("权威域名服务器\n"),t("ul",[t("li",[v._v("通常由专业的域名服务机构提供")]),v._v(" "),t("li",[v._v("购买域名时一般会提供")])])])]),v._v(" "),t("p",[t("strong",[v._v("解析步骤：")])]),v._v(" "),t("ol",[t("li",[v._v("主机先向本地域名服务器进行递归查询")]),v._v(" "),t("li",[v._v("本地域名服务器采用迭代查询，向一个根域名服务器进行查询")]),v._v(" "),t("li",[v._v("根域名服务器告诉本地域名服务器，下一次应该查询的顶级域名服务器的 IP 地址")]),v._v(" "),t("li",[v._v("本地域名服务器向顶级域名服务器进行查询")]),v._v(" "),t("li",[v._v("顶级域名服务器告诉本地域名服务器，下一步查询权限服务器的 IP 地址")]),v._v(" "),t("li",[v._v("本地域名服务器向权限服务器进行查询")]),v._v(" "),t("li",[v._v("权限服务器告诉本地域名服务器所查询的主机的 IP 地址")]),v._v(" "),t("li",[v._v("本地域名服务器最后把查询结果告诉主机")])]),v._v(" "),t("hr"),v._v(" "),t("p",[t("strong",[v._v("参考资料：")])]),v._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"https://blog.csdn.net/baidu_37964071/article/details/80500825",target:"_blank",rel:"noopener noreferrer"}},[v._v("DNS（域名解析协议）详解"),t("OutboundLink")],1)]),v._v(" "),t("li",[t("a",{attrs:{href:"https://www.tuicool.com/articles/V7JN32Z",target:"_blank",rel:"noopener noreferrer"}},[v._v("从输入 URL 到页面加载完成的过程中都发生了什么"),t("OutboundLink")],1)])])])},[],!1,null,null,null);_.default=a.exports}}]);