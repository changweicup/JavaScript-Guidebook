(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{216:function(e,r,t){e.exports=t.p+"assets/img/743418c6-cb11-416e-bccc-688afae04b01.c582b0e4.jpg"},445:function(e,r,t){"use strict";t.r(r);var o=t(2),i=Object(o.a)({},function(){var e=this,r=e.$createElement,o=e._self._c||r;return o("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[o("h1",{attrs:{id:"整体工作流程"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#整体工作流程","aria-hidden":"true"}},[e._v("#")]),e._v(" 整体工作流程")]),e._v(" "),o("p",[e._v("从耗时的角度，浏览器请求、加载、渲染一个页面，时间花在下面五件事情上：")]),e._v(" "),o("ol",[o("li",[e._v("DNS 查询")]),e._v(" "),o("li",[e._v("TCP 连接")]),e._v(" "),o("li",[e._v("HTTP 请求")]),e._v(" "),o("li",[e._v("服务端响应")]),e._v(" "),o("li",[e._v("客户端渲染")])]),e._v(" "),o("p",[e._v("客户端渲染的大致工作流程：")]),e._v(" "),o("ol",[o("li",[o("router-link",{attrs:{to:"/browser-object-model/browser-working-principle/the-rendering-engine.html"}},[e._v("渲染引擎（The Rendering Engine）")])],1),e._v(" "),o("li",[o("router-link",{attrs:{to:"/browser-object-model/browser-working-principle/constructing-the-object-model.html"}},[e._v("构建对象模型（Contructing the Object Model）")])],1),e._v(" "),o("li",[o("router-link",{attrs:{to:"/browser-object-model/browser-working-principle/script-loads.html"}},[e._v("脚本加载")])],1),e._v(" "),o("li",[o("router-link",{attrs:{to:"/browser-object-model/browser-working-principle/render-tree-construction.html"}},[e._v("渲染树构建（Render Tree Construction）")])],1),e._v(" "),o("li",[o("router-link",{attrs:{to:"/browser-object-model/browser-working-principle/layout.html"}},[e._v("布局（Layout）")])],1),e._v(" "),o("li",[o("router-link",{attrs:{to:"/browser-object-model/browser-working-principle/painting.html"}},[e._v("绘制（Painting）")])],1),e._v(" "),o("li",[o("router-link",{attrs:{to:"/browser-object-model/browser-working-principle/css2-visual-module.html"}},[e._v("CSS2 可视模型")])],1),e._v(" "),o("li",[o("router-link",{attrs:{to:"/browser-object-model/browser-working-principle/composite.html"}},[e._v("渲染层合并")])],1)]),e._v(" "),o("h2",{attrs:{id:"浏览器的主要组成部分"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#浏览器的主要组成部分","aria-hidden":"true"}},[e._v("#")]),e._v(" 浏览器的主要组成部分")]),e._v(" "),o("ol",[o("li",[e._v("用户界面（User Interface）：包括地址栏、后退 / 前进按钮、书签目录等，也就是你所看到的除了用来你所请求页面的主窗口之外的其他部分。")]),e._v(" "),o("li",[e._v("浏览器引擎（Browser Engine）：在用户界面和呈现引擎之间传送指令。")]),e._v(" "),o("li",[e._v("渲染引擎（Rendering Engine）：负责显示请求的内容。如果请求的内容是 HTML，它就负责解析 HTML 和 CSS 内容，并将解析后的内容显示在屏幕上。")]),e._v(" "),o("li",[e._v("网络（Networking）：用于网络调试，例如 HTTP 请求，它具有平台无关的接口，并为所有平台提供底层实现。")]),e._v(" "),o("li",[e._v("UI 后端（UI Backed）：用来绘制类似组合选择框及对话框等基本组件，具有不特定于某个平台的通用接口，底层使用操作系统的用户接口。")]),e._v(" "),o("li",[e._v("JavaScript 解释器（Javascript Interpreter）：用于解析和执行 JavaScript 代码。")]),e._v(" "),o("li",[e._v("数据存储（Data Persistence）：属于持久层，浏览器需要在硬盘中保存类似 Cookie 的各种数据，HTML5 定义了 Web Database 技术，这是一种轻量级完整的客户端存储技术。")])]),e._v(" "),o("p",[e._v("需要注意的是，不同于大部分浏览器，Chrome 为每个 Tab 分配了各自的渲染引擎实例，每个 Tab 就是一个独立的进程。")]),e._v(" "),o("h2",{attrs:{id:"浏览器的工作流程"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#浏览器的工作流程","aria-hidden":"true"}},[e._v("#")]),e._v(" 浏览器的工作流程")]),e._v(" "),o("p",[o("img",{attrs:{src:t(216),alt:"浏览器工作大致流程"}})]),e._v(" "),o("ol",[o("li",[o("strong",[e._v("浏览器解析过程")]),e._v(" "),o("ul",[o("li",[e._v("HTML / SVG / XHTML：渲染引擎通过三个 C++ 的类对应这三类文档，解析这三种文件构建 "),o("strong",[e._v("DOM 树")]),e._v("（DOM Tree）")]),e._v(" "),o("li",[e._v("CSS：渲染引擎解析 CSS 文件构建 "),o("strong",[e._v("CSS 规则树")]),e._v("（ CSS Rule Tree）")]),e._v(" "),o("li",[e._v("JavaScript：JavaScript 通过 DOM API 和 CSSOM API 来操作 DOM Tree 和 CSS Rule Tree")])])]),e._v(" "),o("li",[o("strong",[e._v("构建渲染树（Rendering Tree）")]),e._v(" "),o("ul",[o("li",[e._v("解析完成后，浏览器引擎会通过 DOM 树和 CSS 规则树来构造"),o("strong",[e._v("渲染树")])]),e._v(" "),o("li",[e._v("渲染树并不等同于 DOM 树，因为一些像 "),o("code",[e._v("<header>")]),e._v(" 或 "),o("code",[e._v("display: none")]),e._v(" 的东西就没必要放到渲染树中")]),e._v(" "),o("li",[e._v("CSS 的 Rule Tree 主要是为了完成匹配并把 CSS Rule 附加至渲染树上的每个 Element 上。然后，计算每个渲染对象的位置，这通常是 布局（Layout） 和 重排（Reflow） 过程中发生")]),e._v(" "),o("li",[e._v("一旦渲染树构建完成，浏览器会把树里面的内容绘制在屏幕上。")])])]),e._v(" "),o("li",[o("strong",[e._v("布局（Layout）")]),e._v("：定位坐标和大小，是否换行，"),o("code",[e._v("position")]),e._v("、"),o("code",[e._v("overflow")]),e._v(" 之类的属性。确定每个 DOM 元素的样式规则后，计算每个 DOM 元素最终在屏幕上显示的大小和位置。Web 页面中元素的布局是相对的，因此一个元素的布局发生变化，会联动地引发其他元素的布局发生变化。比如 "),o("code",[e._v("body")]),e._v(" 元素的 "),o("code",[e._v("width")]),e._v(" 变化会影响其后代元素的宽度")]),e._v(" "),o("li",[o("strong",[e._v("绘制（Paint）")]),e._v("：绘制文字、颜色、图像、边框和阴影等，也就是一个 DOM 元素所有的"),o("strong",[e._v("可视效果")]),e._v("。一般来说，这个绘制过程是在多个层上完成的")]),e._v(" "),o("li",[o("strong",[e._v("渲染层合并（Composite）")]),e._v("：页面中 DOM 元素的绘制是在多个层上进行的，在每个层上完成绘制过程之后，浏览器会将所有层按照合理的顺序合并成一个图层，然后在屏幕上呈现")]),e._v(" "),o("li",[e._v("最后通过调用操作系统 NativeGUI API 进行绘制")])]),e._v(" "),o("hr"),e._v(" "),o("p",[o("strong",[e._v("参考资料：")])]),e._v(" "),o("ul",[o("li",[o("a",{attrs:{href:"https://www.cnblogs.com/wjlog/p/5744753.html#chapter8",target:"_blank",rel:"noopener noreferrer"}},[e._v("前端必读：浏览器内部工作原理"),o("OutboundLink")],1)]),e._v(" "),o("li",[o("a",{attrs:{href:"https://zhuanlan.zhihu.com/p/29418126",target:"_blank",rel:"noopener noreferrer"}},[e._v("浏览器的渲染：过程与原理"),o("OutboundLink")],1)]),e._v(" "),o("li",[o("a",{attrs:{href:"https://juejin.im/entry/5a9a379af265da239d48c027",target:"_blank",rel:"noopener noreferrer"}},[e._v("浏览器工作员：Webkit 内核研究"),o("OutboundLink")],1)])])])},[],!1,null,null,null);r.default=i.exports}}]);